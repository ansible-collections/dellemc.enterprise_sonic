---
- name: Run invalid command
  register: result
  ignore_errors: true
  sonic_command:
    commands:
      - show foo

- name: First assertion
  ansible.builtin.assert:
    that:
      - result.failed == true
      - result.msg is defined

- name: Run commands that include invalid command
  register: result
  ignore_errors: true
  sonic_command:
    commands:
      - show system
      - show foo

- name: Second assertion
  ansible.builtin.assert:
    that:
      - result.failed == true
      - result.msg is defined
