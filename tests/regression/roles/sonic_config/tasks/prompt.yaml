---
- name: Test SONiC config with prompt handling
  sonic_config:
    commands:
      - command: 'do image remove all'
        prompt: '\[y/N\]:$'
        answer: 'N'
  register: prompt_tc

- name: Set facts
  ansible.builtin.set_fact:
    ansible_facts:
      test_reports: "{{ ansible_facts['test_reports'] | default({}) | combine({module_name: {'prompt_test_case.1': prompt_tc_condition}}, recursive=True) }}"
  no_log: true
