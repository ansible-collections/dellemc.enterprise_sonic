---
ansible_connection: httpapi
module_name: sonic_dhcp_snooping

preparations_tests:

tests:
  - name: test_case_01
    description: Add DHCPv4 and DHCPv6 snooping configuration
    state: merged
    input:
      afis:
        - afi: 'ipv4'
          enabled: true
          vlans:
            - '1'
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '1'
        - afi: 'ipv6'
          enabled: true
          verify_mac: false
          vlans:
            - '2'
            - '3'
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '2'
            - intf_type: 'PortChannel'
              intf_number: '1'
  - name: test_case_02
    description: Update DHCPv4 and DHCPv6 snooping configuration
    state: merged
    input:
      afis:
        - afi: 'ipv4'
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '2'
        - afi: 'ipv6'
          vlans:
            - '2'
            - '3'
            - '4'
          trusted:
            - intf_type: 'PortChannel'
              intf_number: '3'
  - name: test_case_03
    description: Override DHCPv4 and DHCPv6 snooping configuration
    state: overridden
    input:
      afis:
        - afi: 'ipv4'
          enabled: true
          vlans: ['1', '2']
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '1'
            - intf_type: 'Ethernet'
              intf_number: '2'
        - afi: 'ipv6'
          verify_mac: true
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '1'
  - name: test_case_04
    description: Replace DHCPv4 and DHCPv6 snooping configuration
    state: replaced
    input:
      afis:
        - afi: 'ipv4'
          verify_mac: false
          vlans: ['3']
          trusted:
            - intf_type: 'Ethernet'
              intf_number: '1'
            - intf_type: 'Ethernet'
              intf_number: '2'
        - afi: 'ipv6'
          vlans: ['1', '4']
          trusted:
            - intf_type: 'PortChannel'
              intf_number: '1'
            - intf_type: 'PortChannel'
              intf_number: '2'
          enabled: true
  - name: test_case_05
    description: Delete DHCP snooping configuration for specific AFI
    state: deleted
    input:
      afis:
        - afi: 'ipv6'
  - name: test_case_06
    description: Delete all DHCP snooping configuration
    state: deleted
    input: {}