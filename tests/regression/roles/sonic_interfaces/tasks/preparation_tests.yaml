- name: Delete existing mclag
  sonic_mclag:
    config: 
    state: deleted
  ignore_errors: yes
- name: Deletes old vxlans
  sonic_vxlans:
    config: []
    state: deleted
  ignore_errors: yes
- name: "initialize default interfaces"
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ default_interface_cli }}"
  register: output
  ignore_errors: yes
- name: "delete loopback interfaces"
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ preparations_tests.delete_port_configurations }}"
  register: output
  ignore_errors: yes  
- name: delete VLANs 
  sonic_vlans:
   config: []
   state: deleted   
  ignore_errors: yes
- name: delete existing portchannels
  sonic_lag_interfaces:
   config: []
   state: deleted
  ignore_errors: yes
- name: create VLANs 
  sonic_vlans:
   config: "{{ preparations_tests.add_vlans_input }}"
   state: merged
  ignore_errors: yes
- name: create sonic_lag_interfaces "merged" state
  sonic_lag_interfaces:
   config: "{{ preparations_tests.add_lag_interfaces }}"
   state: merged
  ignore_errors: yes
