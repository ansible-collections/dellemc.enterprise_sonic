---
- name: Delete existing MCLAGs
  sonic_mclag:
    config:
    state: deleted
  failed_when: false

- name: Delete existing VXLANs
  sonic_vxlans:
    config: []
    state: deleted
  failed_when: false

- name: Initialize default interfaces
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ default_interface_cli }}"
  register: output
  failed_when: false

- name: Create LAG interfaces
  sonic_lag_interfaces:
    config: "{{ preparations_tests.add_lag_interfaces }}"
    state: merged
  failed_when: false

- name: Delete existing VLANs
  sonic_vlans:
    config: "{{ preparations_tests.add_vlans_input }}"
    state: deleted
  register: merge_vlans_output
  failed_when: false

- name: Create VLANs
  sonic_vlans:
    config: "{{ preparations_tests.add_vlans_input }}"
    state: merged
  register: merge_vlans_output
  failed_when: false
