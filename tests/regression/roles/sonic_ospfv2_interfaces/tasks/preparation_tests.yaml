---
- name: Delete old OSPFv2 interfaces configurations
  sonic_ospfv2_interfaces:
    config: []
    state: deleted
  failed_when: false

- name: Initialize OSPF
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ preparations_tests.init_ospf }}"
  failed_when: false

- name: Initialize loopback
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ preparations_tests.init_loopback }}"
  failed_when: false

- name: Create VLANs
  sonic_vlans:
    config: "{{ preparations_tests.vlans }}"
    state: merged
  failed_when: false

- name: Create LAG interfaces
  sonic_lag_interfaces:
    config: "{{ preparations_tests.lag_interfaces }}"
    state: merged
  failed_when: false
