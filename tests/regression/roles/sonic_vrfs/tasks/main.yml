---
- name: Preparations for test
  ansible.builtin.include_tasks: preparation_tests.yaml

- name: Test started ...
  ansible.builtin.include_tasks: tasks_template.yaml
  loop: "{{ sonic_vrf_tests }}"

- name: Cleanup for test
  vars:
    ansible_connection: network_cli
  sonic_config:
    commands: "{{ preparations_tests.delete_interfaces }}"
  register: output
  failed_when: false
