---
merged_01:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.3"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: false
              advertise_default_gw: false
              dup_addr_detection:
                enabled: false
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: aaa
                - advertise_afi: ipv6
                  route_map: bbb
              rd: "3.3.3.3:33"
              rt_in:
                - "22:22"
              dampening: true
            - afi: ipv4
              safi: unicast
              network:
                - 2.2.2.2/16
                - 192.168.10.1/32
              dampening: true
              aggregate_address_config:
                - prefix: "1.1.1.1/1"
                  as_set: true
                  policy_name: aaa
                  summary_only: true
            - afi: ipv6
              safi: unicast
              dampening: true
              max_path:
                ebgp: 4
                ibgp: 5
              redistribute:
                - metric: "21"
                  protocol: connected
                  route_map: bb
                - metric: "27"
                  protocol: ospf
                  route_map: aa
                - metric: "26"
                  protocol: static
                  route_map: bb
      - bgp_as: 51
        vrf_name: VrfReg1
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                  route_map: rmap-1
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
            - afi: l2vpn
              safi: evpn
              dup_addr_detection:
                freeze: 600
                max_moves: 15
                time: 300
      - bgp_as: 51
        vrf_name: VrfReg2
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg1
                  route_map: rmap-2
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg1
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
            - vrf_name: VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:L2VPN_EVPN'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:L2VPN_EVPN'
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:config:
                    advertise-pip: true
                    advertise-pip-ip: 3.3.3.3
                    advertise-pip-peer-ip: 4.4.4.4
                    advertise-svi-ip: true
                    advertise-all-vni: false
                    advertise-default-gw: false
                    route-distinguisher: 3.3.3.3:33
                    import-rts:
                      - '22:22'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:route-advertise-list:
          - advertise-afi-safi: IPV4_UNICAST
            config:
              advertise-afi-safi: IPV4_UNICAST
              route-map:
                - aaa
          - advertise-afi-safi: IPV6_UNICAST
            config:
              advertise-afi-safi: IPV6_UNICAST
              route-map:
                - bbb
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:config:
          enabled: false
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV4_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV6_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/network-config"
      method: "patch"
      data:
        network-config:
          network:
            - config:
                prefix: '2.2.2.2/16'
              prefix: '2.2.2.2/16'
            - config:
                prefix: '192.168.10.1/32'
              prefix: '192.168.10.1/32'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/route-flap-damping"
      method: "patch"
      data:
        route-flap-damping:
          config:
            enabled: true
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/aggregate-address-config"
      method: "patch"
      data:
        openconfig-network-instance:aggregate-address-config:
          aggregate-address:
            - prefix: '1.1.1.1/1'
              config:
                prefix: '1.1.1.1/1'
                as-set: true
                policy-name: 'aaa'
                summary-only: true
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths"
      method: "patch"
      data:
        openconfig-network-instance:use-multiple-paths:
          ebgp:
            config:
              maximum-paths: 4
          ibgp:
            config:
              maximum-paths: 5
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      method: "patch"
      data:
        openconfig-network-instance:table-connections:
          table-connection:
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
              config:
                address-family: openconfig-types:IPV6
                metric: 21.0
                import-policy:
                  - bb
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:OSPF
              config:
                address-family: openconfig-types:IPV6
                metric: 27.0
                import-policy:
                  - aa
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:STATIC
              config:
                address-family: openconfig-types:IPV6
                metric: 26.0
                import-policy:
                  - bb
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV4_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV6_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:L2VPN_EVPN'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:config:
          freeze: '600'
          max-moves: 15
          time: 300
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
            policy-name: rmap-1
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV4_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:IPV6_UNICAST'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
              - VrfReg1
            policy-name: rmap-2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
              - VrfReg1

merged_02:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              dampening: false
              max_path:
                ebgp: 2
                ibgp: 1
              advertise_all_vni: false
              redistribute:
                - metric: "20"
                  protocol: connected
                  route_map: aa
                - metric: "26"
                  protocol: ospf
                  route_map: bb
                - metric: "25"
                  protocol: static
                  route_map: aa
            - afi: ipv6
              safi: unicast
              max_path:
                ebgp: 1
                ibgp: 1
              advertise_all_vni: true
              redistribute:
                - metric: "21"
                  protocol: connected
                  route_map: bb
                - metric: "27"
                  protocol: ospf
                  route_map: aa
                - metric: "28"
                  protocol: static
                  route_map: aa
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.3"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: true
              advertise_default_gw: false
              dampening: true
              dup_addr_detection:
                freeze: permanent
                max_moves: 20
                time: 720
              max_path:
                ebgp: 4
                ibgp: 5
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: aaNew
                - advertise_afi: ipv6
                  route_map: bbNew
      - bgp_as: 51
        vrf_name: VrfReg1
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg2
                  route_map: rmap-2
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg2
      - bgp_as: 51
        vrf_name: VrfReg2
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg1
                  route_map: rmap-2
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg1
                  route_map: rmap-1
    state: merged
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: false
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-pip-ip: 3.3.3.3
                      advertise-pip-peer-ip: 4.4.4.4
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: true
                        freeze: '200'
                        max-moves: 30
                        time: 900
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                        - advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 600
                          vni-number: 600
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                      policy-name: rmap-1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - VrfReg1
                      policy-name: rmap-2
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - VrfReg1
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
            - vrf_name: VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:L2VPN_EVPN'
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:config:
                    advertise-default-gw: false
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:route-advertise-list:
          - advertise-afi-safi: IPV4_UNICAST
            config:
              advertise-afi-safi: IPV4_UNICAST
              route-map:
                - aaNew
          - advertise-afi-safi: IPV6_UNICAST
            config:
              advertise-afi-safi: IPV6_UNICAST
              route-map:
                - bbNew
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:config:
          freeze: permanent
          max-moves: 20
          time: 720
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      method: "patch"
      data:
        openconfig-network-instance:table-connections:
          table-connection:
            - address-family: openconfig-types:IPV4
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
              config:
                address-family: openconfig-types:IPV4
                metric: 20.0
                import-policy:
                  - aa
            - address-family: openconfig-types:IPV4
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:OSPF
              config:
                address-family: openconfig-types:IPV4
                metric: 26.0
                import-policy:
                  - bb
            - address-family: openconfig-types:IPV4
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:STATIC
              config:
                address-family: openconfig-types:IPV4
                metric: 25.0
                import-policy:
                  - aa
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      method: "patch"
      data:
        openconfig-network-instance:table-connections:
          table-connection:
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
              config:
                address-family: openconfig-types:IPV6
                metric: 21.0
                import-policy:
                  - bb
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:OSPF
              config:
                address-family: openconfig-types:IPV6
                metric: 27.0
                import-policy:
                  - aa
            - address-family: openconfig-types:IPV6
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:STATIC
              config:
                address-family: openconfig-types:IPV6
                metric: 28.0
                import-policy:
                  - aa
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - VrfReg2
            policy-name: rmap-2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/\
             afi-safis/afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: "patch"
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - default
            policy-name: rmap-1

merged_03:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              dampening: false
              max_path:
                ebgp: 2
                ibgp: 1
              advertise_all_vni: false
            - afi: ipv6
              safi: unicast
              max_path:
                ebgp: 1
                ibgp: 1
              advertise_all_vni: true
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.99"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: true
              advertise_default_gw: true
              dampening: true
              max_path:
                ebgp: 4
                ibgp: 5
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: aa
                - advertise_afi: ipv6
                  route_map: bb
    state: merged
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: false
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-pip-ip: 3.3.3.3
                      advertise-pip-peer-ip: 4.4.4.4
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                        - advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 600
                          vni-number: 600
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: "patch"
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: 'openconfig-bgp-types:L2VPN_EVPN'
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:config:
                    advertise-pip-ip: 3.3.3.99

deleted_01:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              dampening: true
              max_path:
                ebgp: 2
                ibgp: 1
              advertise_all_vni: false
              redistribute:
                - metric: "20"
                  protocol: connected
                  route_map: aa
                - metric: "26"
                  protocol: ospf
                  route_map: bb
                - metric: "25"
                  protocol: static
                  route_map: aa
              aggregate_address_config:
                - prefix: "1.1.1.1/1"
                - prefix: "2.2.2.2/2"
                  as_set: true
                  policy_name: aa
                  summary_only: true
            - afi: ipv6
              safi: unicast
              max_path:
                ebgp: 2
                ibgp: 1
              advertise_all_vni: true
              redistribute:
                - metric: "21"
                  protocol: connected
                  route_map: bb
                - metric: "27"
                  protocol: ospf
                  route_map: aa
                - metric: "28"
                  protocol: static
                  route_map: aa
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.3"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: true
              advertise_default_gw: false
              dup_addr_detection:
                enabled: false
              dampening: true
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: aa
                - advertise_afi: ipv6
                  route_map: bb
      - bgp_as: 51
        vrf_name: VrfReg1
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - VrfReg2
                  route_map: rmap-1
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - VrfReg2
            - afi: l2vpn
              safi: evpn
              dup_addr_detection:
                enabled: true
                freeze: permanent
                max_moves: 10
                time: 720
      - bgp_as: 51
        vrf_name: VrfReg2
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  route_map: rmap-2
            - afi: ipv6
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - default
                    - VrfReg1
    state: deleted
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 2
                  aggregate-address-config:
                    aggregate-address:
                      - prefix: '1.1.1.1/1'
                        config:
                          prefix: '1.1.1.1/1'
                      - prefix: '2.2.2.2/2'
                        config:
                          prefix: '2.2.2.2/2'
                          as-set: true
                          policy-name: aa
                          summary-only: true
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 2
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-pip-ip: 3.3.3.3
                      advertise-pip-peer-ip: 4.4.4.4
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: false
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                        - advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 600
                          vni-number: 600
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg2
                      policy-name: rmap-1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg2
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: true
                        freeze: permanent
                        max-moves: 10
                        time: 720
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg1
                      policy-name: rmap-2
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg1
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
            - vrf_name: VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/enabled"
      method: "patch"
      data:
        openconfig-bgp-evpn-ext:enabled: true
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/route-flap-damping/config/enabled"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/use-multiple-paths/ibgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/aggregate-address-config/aggregate-address=1.1.1.1%2F1"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/aggregate-address-config/aggregate-address=2.2.2.2%2F2/config/as-set"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/aggregate-address-config/aggregate-address=2.2.2.2%2F2/config/policy-name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/aggregate-address-config/aggregate-address=2.2.2.2%2F2/config/summary-only"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths/ibgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-all-vni"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-peer-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-svi-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list=IPV4_UNICAST/config/route-map=aa"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list=IPV6_UNICAST/config/route-map=bb"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/name=VrfReg2"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/policy-name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance/config/name=VrfReg2"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/freeze"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/max-moves"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/time"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/policy-name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance/config/name=default"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance/config/name=VrfReg1"
      method: "delete"

deleted_02:
  module_args:
    config:
    state: deleted
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  network-config:
                    network:
                      - config:
                          prefix: 22.22.22.22/16
                        prefix: 22.22.22.22/16
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  route-flap-damping:
                    config:
                      enabled: true
                  network-config:
                    network:
                      - config:
                          prefix: 22.22.22.22/16
                        prefix: 22.22.22.22/16
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-pip-ip: 3.3.3.3
                      advertise-pip-peer-ip: 4.4.4.4
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: true
                        freeze: '180'
                        max-moves: 25
                        time: 900
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                        - advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 600
                          vni-number: 600
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg2
                      policy-name: rmap-1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg1
                      policy-name: rmap-2
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                        - VrfReg1
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
        value:
          openconfig-network-instance:table-connections:
            table-connection:
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                config:
                  address-family: openconfig-types:IPV6
                  metric: 21.0
                  import-policy:
                    - bb
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:OSPF
                config:
                  address-family: openconfig-types:IPV6
                  metric: 27.0
                  import-policy:
                    - aa
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:STATIC
                config:
                  address-family: openconfig-types:IPV6
                  metric: 26.0
                  import-policy:
                    - bb
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/table-connections"
      response:
        code: 200
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
            - vrf_name: VrfReg2
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/network-config/network=22.22.22.22%2f16"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/route-flap-damping/config/enabled"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-all-vni"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-default-gw"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-peer-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-svi-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/freeze"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/max-moves"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/time"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:vnis/vni=600"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             network-config/network=22.22.22.22%2f16"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             route-flap-damping/config/enabled"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV4_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV6_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:L2VPN_EVPN"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:OSPF,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:STATIC,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/policy-name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV4_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance/config/name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV6_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/policy-name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV4_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/openconfig-bgp-ext:import-network-instance/config/name"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV6_UNICAST"
      method: "delete"

deleted_03:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
            - afi: ipv6
              safi: unicast
              max_path:
                ebgp: 2
                ibgp: 1
              advertise_all_vni: true
              redistribute:
                - metric: "17"
                  protocol: connected
                  route_map: bb
                - metric: "18"
                  protocol: ospf
                  route_map: aa
                - metric: "19"
                  protocol: static
                  route_map: aa
            - afi: l2vpn
              safi: evpn
    state: deleted
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 2
                    ibgp:
                      config:
                        maximum-paths: 1
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  route-flap-damping:
                    config:
                      enabled: true
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-default-gw: true
                      advertise-pip: true
                      advertise-pip-ip: 3.3.3.3
                      advertise-pip-peer-ip: 4.4.4.4
                      advertise-svi-ip: true
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: true
                        freeze: '1200'
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                        - advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV6_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 600
                          vni-number: 600
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
        value:
          openconfig-network-instance:table-connections:
            table-connection:
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                config:
                  address-family: openconfig-types:IPV6
                  metric: 21.0
                  import-policy:
                    - bb
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:OSPF
                config:
                  address-family: openconfig-types:IPV6
                  metric: 27.0
                  import-policy:
                    - aa
              - address-family: openconfig-types:IPV6
                dst-protocol: openconfig-policy-types:BGP
                src-protocol: openconfig-policy-types:STATIC
                config:
                  address-family: openconfig-types:IPV6
                  metric: 26.0
                  import-policy:
                    - bb
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/route-flap-damping/config/enabled"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-all-vni"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-default-gw"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-pip-peer-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/advertise-svi-ip"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/freeze"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list=IPV4_UNICAST/config/route-map=aa"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list=IPV6_UNICAST/config/route-map=bb"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:vnis/vni=600"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             route-flap-damping/config/enabled"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV4_UNICAST"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:L2VPN_EVPN"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:OSPF,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:STATIC,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: "delete"
      data:

replaced_01:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.3"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: false
              advertise_default_gw: false
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: bb
              rd: "1.1.1.1:11"
              rt_in:
                - "22:22"
              rt_out:
                - "13:13"
              vnis:
                - vni_number: 5
                  advertise_default_gw: true
                  advertise_svi_ip: true
                  rd: "10.10.10.10:55"
                  rt_in:
                    - "88:88"
                  rt_out:
                    - "77:77"
            - afi: ipv4
              safi: unicast
              network:
                - 2.2.2.2/16
                - 192.168.10.1/32
              dampening: true
              redistribute:
                - protocol: connected
                - protocol: ospf
                  metric: 30
      - bgp_as: 51
        vrf_name: VrfReg2
        address_family:
          afis:
            - afi: ipv4
              safi: unicast
              import:
                vrf:
                  vrf_list:
                    - VrfReg1
                  route_map: rmap-reg1
    state: replaced
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
                  network-config:
                    network:
                      - prefix: '2.2.2.2/16'
                        config:
                          prefix: '2.2.2.2/16'
                      - prefix: '192.168.10.1/32'
                        config:
                          prefix: '192.168.10.1/32'
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 4
                    ibgp:
                      config:
                        maximum-paths: 5
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-pip: true
                      advertise-pip-ip: '3.3.3.3'
                      advertise-pip-peer-ip: '4.4.4.4'
                      advertise-svi-ip: true
                      route-distinguisher: '1.1.1.1:11'
                      import-rts:
                        - '12:12'
                      export-rts:
                        - '13:13'
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - aa
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 1
                            route-distinguisher: '5.5.5.5:55'
                            advertise-default-gw: true
                            advertise-svi-ip: true
                            import-rts:
                              - '88:88'
                            export-rts:
                              - '77:77'
                          vni-number: 1
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: false
                        freeze: '1200'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  network-config:
                    network:
                      - prefix: '3.3.3.3/16'
                        config:
                          prefix: '3.3.3.3/16'
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                      policy-name: rmap-1
                  route-flap-damping:
                    config:
                      enabled: false
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
            - vrf_name: VrfReg2
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
        value:
          openconfig-network-instance:table-connections:
            table-connection:
              - src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV4
                config:
                  src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV4
                  metric: 21
                  import-policy:
                    - bb
              - src-protocol: openconfig-policy-types:OSPF
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV4
                config:
                  src-protocol: openconfig-policy-types:OSPF
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV4
                  metric: 27
                  import-policy:
                    - bb
              - src-protocol: openconfig-policy-types:STATIC
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV6
                config:
                  src-protocol: openconfig-policy-types:STATIC
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV6
                  metric: 26
                  import-policy:
                    - aa
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/import-rts=12%3A12"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list=IPV4_UNICAST/config/route-map=aa"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:vnis/vni=1"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/freeze"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV4/config/import-policy=bb"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV4/config/metric"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:OSPF,openconfig-policy-types:BGP,openconfig-types:IPV4/config/import-policy=bb"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/name=default"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg2/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance"
      method: patch
      data:
        openconfig-bgp-ext:import-network-instance:
          config:
            name:
              - VrfReg1
            policy-name: rmap-reg1
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: patch
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:config:
                    advertise-all-vni: false
                    advertise-default-gw: false
                    import-rts:
                      - '22:22'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: patch
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:vnis:
                    vni:
                      - config:
                          advertise-default-gw: true
                          advertise-svi-ip: true
                          export-rts:
                            - 77:77
                          import-rts:
                            - 88:88
                          route-distinguisher: 10.10.10.10:55
                          vni-number: 5
                        vni-number: 5
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:route-advertise/route-advertise-list"
      method: patch
      data:
        openconfig-bgp-evpn-ext:route-advertise-list:
          - advertise-afi-safi: IPV4_UNICAST
            config:
              advertise-afi-safi: IPV4_UNICAST
              route-map:
                - bb
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/enabled"
      method: patch
      data:
        openconfig-bgp-evpn-ext:enabled: true
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      method: patch
      data:
        openconfig-network-instance:table-connections:
          table-connection:
            - address-family: openconfig-types:IPV4
              config:
                address-family: openconfig-types:IPV4
                metric: 30.0
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:OSPF

overridden_01:
  module_args:
    config:
      - bgp_as: 51
        address_family:
          afis:
            - afi: l2vpn
              safi: evpn
              advertise_pip: true
              advertise_pip_ip: "3.3.3.3"
              advertise_pip_peer_ip: "4.4.4.4"
              advertise_svi_ip: true
              advertise_all_vni: false
              advertise_default_gw: false
              dup_addr_detection:
                max_moves: 10
                time: 600
              route_advertise_list:
                - advertise_afi: ipv4
                  route_map: bb
              rd: "1.1.1.1:11"
              rt_in:
                - "22:22"
              rt_out:
                - "13:13"
              vnis:
                - vni_number: 5
                  advertise_default_gw: true
                  advertise_svi_ip: true
                  rd: "10.10.10.10:55"
                  rt_in:
                    - "88:88"
                  rt_out:
                    - "77:77"
            - afi: ipv4
              safi: unicast
              network:
                - 2.2.2.2/16
                - 192.168.10.1/32
              dampening: true
              redistribute:
                - protocol: connected
                - protocol: ospf
                  metric: 30
    state: overridden
  existing_bgp_config:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
                  network-config:
                    network:
                      - prefix: '2.2.2.2/16'
                        config:
                          prefix: '2.2.2.2/16'
                      - prefix: '192.168.10.1/32'
                        config:
                          prefix: '192.168.10.1/32'
                - afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV6_UNICAST
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 4
                    ibgp:
                      config:
                        maximum-paths: 5
                - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  config:
                    afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                  l2vpn-evpn:
                    openconfig-bgp-evpn-ext:config:
                      advertise-all-vni: true
                      advertise-pip: true
                      advertise-pip-ip: '3.3.3.3'
                      advertise-pip-peer-ip: '4.4.4.4'
                      advertise-svi-ip: true
                      route-distinguisher: '1.1.1.1:11'
                      import-rts:
                        - '12:12'
                      export-rts:
                        - '13:13'
                    openconfig-bgp-evpn-ext:route-advertise:
                      route-advertise-list:
                        - advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                          config:
                            advertise-afi-safi: openconfig-bgp-types:IPV4_UNICAST
                            route-map:
                              - bb
                    openconfig-bgp-evpn-ext:vnis:
                      vni:
                        - config:
                            vni-number: 1
                            route-distinguisher: '5.5.5.5:55'
                            advertise-default-gw: true
                            advertise-svi-ip: true
                            import-rts:
                              - '88:88'
                            export-rts:
                              - '77:77'
                          vni-number: 1
                    openconfig-bgp-evpn-ext:dup-addr-detection:
                      config:
                        enabled: true
                        freeze: permanent
                        max-moves: 20
                        time: 900
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global"
      response:
        code: 200
        value:
          openconfig-network-instance:global:
            config:
              as: 51
            afi-safis:
              afi-safi:
                - afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  config:
                    afi-safi-name: openconfig-bgp-types:IPV4_UNICAST
                  openconfig-bgp-ext:import-network-instance:
                    config:
                      name:
                        - default
                      policy-name: rmap-1
                  network-config:
                    network:
                      - prefix: '3.3.3.3/16'
                        config:
                          prefix: '3.3.3.3/16'
                  route-flap-damping:
                    config:
                      enabled: true
                  use-multiple-paths:
                    ebgp:
                      config:
                        maximum-paths: 1
                    ibgp:
                      config:
                        maximum-paths: 1
    - path: "data/sonic-vrf:sonic-vrf/VRF/VRF_LIST"
      response:
        code: 200
        value:
          sonic-vrf:VRF_LIST:
            - vrf_name: default
            - vrf_name: VrfReg1
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      response:
        code: 200
        value:
          openconfig-network-instance:table-connections:
            table-connection:
              - src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV4
                config:
                  src-protocol: openconfig-policy-types:DIRECTLY_CONNECTED
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV4
                  metric: 21
                  import-policy:
                    - bb
              - src-protocol: openconfig-policy-types:OSPF
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV4
                config:
                  src-protocol: openconfig-policy-types:OSPF
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV4
                  metric: 27
                  import-policy:
                    - bb
              - src-protocol: openconfig-policy-types:STATIC
                dst-protocol: openconfig-policy-types:BGP
                address-family: openconfig-types:IPV6
                config:
                  src-protocol: openconfig-policy-types:STATIC
                  dst-protocol: openconfig-policy-types:BGP
                  address-family: openconfig-types:IPV6
                  metric: 26
                  import-policy:
                    - aa
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/table-connections"
      response:
        code: 200
  expected_config_requests:
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths/ebgp/config/maximum-paths"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV6_UNICAST/use-multiple-paths/ibgp/config/maximum-paths"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:config/import-rts=12%3A12"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:vnis/vni=1"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config/freeze"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV6_UNICAST"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/network-config/network=3.3.3.3%2f16"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/name"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/openconfig-bgp-ext:import-network-instance/config/policy-name"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=IPV4_UNICAST/route-flap-damping/config/enabled"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=VrfReg1/protocols/protocol=BGP,bgp/bgp/global/afi-safis/\
             afi-safi=openconfig-bgp-types:IPV4_UNICAST"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV4/config/import-policy=bb"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:DIRECTLY_CONNECTED,openconfig-policy-types:BGP,openconfig-types:IPV4/config/metric"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:OSPF,openconfig-policy-types:BGP,openconfig-types:IPV4/config/import-policy=bb"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections/\
             table-connection=openconfig-policy-types:STATIC,openconfig-policy-types:BGP,openconfig-types:IPV6"
      method: delete
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: patch
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:config:
                    advertise-all-vni: false
                    advertise-default-gw: false
                    import-rts:
                      - '22:22'
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global"
      method: patch
      data:
        openconfig-network-instance:global:
          afi-safis:
            afi-safi:
              - afi-safi-name: openconfig-bgp-types:L2VPN_EVPN
                l2vpn-evpn:
                  openconfig-bgp-evpn-ext:vnis:
                    vni:
                      - config:
                          vni-number: 5
                          advertise-default-gw: true
                          advertise-svi-ip: true
                          route-distinguisher: 10.10.10.10:55
                          import-rts:
                            - 88:88
                          export-rts:
                            - 77:77
                        vni-number: 5
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/protocols/protocol=BGP,bgp/bgp/global/afi-safis/afi-safi=L2VPN_EVPN/\
             l2vpn-evpn/openconfig-bgp-evpn-ext:dup-addr-detection/config"
      method: patch
      data:
        openconfig-bgp-evpn-ext:config:
          max-moves: 10
          time: 600
    - path: "/data/openconfig-network-instance:network-instances/network-instance=default/table-connections"
      method: patch
      data:
        openconfig-network-instance:table-connections:
          table-connection:
            - address-family: openconfig-types:IPV4
              dst-protocol: openconfig-policy-types:BGP
              src-protocol: openconfig-policy-types:OSPF
              config:
                address-family: openconfig-types:IPV4
                metric: 30.0
