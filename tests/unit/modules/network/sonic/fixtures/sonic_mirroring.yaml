---
merged_01:
  module_args:
    config:
      span:
        - name: dell-1
          dst_port: CPU
          source: Eth1/5
          direction: both
        - name: dell-2
          dst_port: CPU
      erspan:
        - name: dell-3
          dst_ip: 11.11.11.12
          src_ip: 21.21.21.12
          source: Eth1/6
          direction: tx
  existing_mirroring_config:
    - path: "data/openconfig-mirror-ext:mirror/sessions"
      response:
        code: 200
  expected_config_requests:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-1
            dst_port: CPU
            src_port: Eth1/5
            direction: BOTH
            type: span
          - name: dell-2
            dst_port: CPU
            type: span
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-3
            dst_ip: 11.11.11.12
            src_ip: 21.21.21.12
            src_port: Eth1/6
            direction: TX
            type: erspan

deleted_01:
  module_args:
    state: deleted
  existing_mirroring_config:
    - path: "data/openconfig-mirror-ext:mirror/sessions"
      response:
        code: 200
        value:
          openconfig-mirror-ext:sessions:
            session:
              - name: dell-1
                config:
                  name: dell-1
                  direction: both
                  dst-port: CPU
                  src-port: Eth1/5
              - name: dell-2
                config:
                  name: dell-2
                  direction: both
                  dst-ip: 100.11.11.11
                  src-ip: 200.22.22.22
                  src-port: Eth1/6
                  queue: 0
  expected_config_requests:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "delete"
      data:

deleted_02:
  module_args:
    state: deleted
    config:
      span:
        - name: dell-1
      erspan:
        - name: dell-2
  existing_mirroring_config:
    - path: "data/openconfig-mirror-ext:mirror/sessions"
      response:
        code: 200
        value:
          openconfig-mirror-ext:sessions:
            session:
              - name: dell-1
                config:
                  name: dell-1
                  direction: both
                  dst-port: CPU
                  src-port: Eth1/4
              - name: dell-2
                config:
                  name: dell-2
                  direction: both
                  dst-ip: 100.11.11.11
                  src-ip: 200.22.22.22
                  src-port: Eth1/6
                  queue: 0
              - name: dell-3
                config:
                  name: dell-3
                  direction: tx
                  dst-port: Eth1/1
                  src-port: Eth1/5
  expected_config_requests:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-1"
      method: "delete"
      data:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-2"
      method: "delete"
      data:

replaced_01:
  module_args:
    state: replaced
    config:
      erspan:
        - name: dell-2
          dst_ip: 32.22.22.12
          src_ip: 31.21.21.12
          source: Eth1/6
          dscp: 6
          gre: "0x6689"
          ttl: 9
          queue: 0
          direction: rx
      span:
        - name: dell-1
          dst_port: Eth1/1
          source: Eth1/4
          direction: rx
        - name: dell-3
          dst_port: CPU
          source: Eth1/4
          direction: tx
  existing_mirroring_config:
    - path: "data/openconfig-mirror-ext:mirror/sessions"
      response:
        code: 200
        value:
          openconfig-mirror-ext:sessions:
            session:
              - name: dell-1
                config:
                  name: dell-1
                  direction: both
                  dst-port: CPU
                  src-port: Eth1/4
              - name: dell-2
                config:
                  name: dell-2
                  direction: both
                  dst-ip: 100.11.11.11
                  src-ip: 200.22.22.22
                  src-port: Eth1/6
                  queue: 0
  expected_config_requests:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-1"
      method: "delete"
      data:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-2"
      method: "delete"
      data:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-1
            dst_port: Eth1/1
            src_port: Eth1/4
            direction: RX
            type: span
          - name: dell-3
            dst_port: CPU
            src_port: Eth1/4
            direction: TX
            type: span
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-2
            dst_ip: 32.22.22.12
            src_ip: 31.21.21.12
            src_port: Eth1/6
            direction: RX
            dscp: 6
            gre_type: "0x6689"
            ttl: 9
            queue: 0
            type: erspan

overridden_01:
  module_args:
    state: overridden
    config:
      erspan:
        - name: dell-2
          dst_ip: 32.22.22.12
          src_ip: 31.21.21.12
          source: Eth1/6
          gre: "0x6689"
          queue: 0
          direction: rx
        - name: dell-6
          dst_ip: 22.22.22.12
          src_ip: 21.21.21.12
          source: Eth1/6
          direction: rx
      span:
        - name: dell-3
          dst_port: CPU
          source: Eth1/4
          direction: tx
  existing_mirroring_config:
    - path: "data/openconfig-mirror-ext:mirror/sessions"
      response:
        code: 200
        value:
          openconfig-mirror-ext:sessions:
            session:
              - name: dell-1
                config:
                  name: dell-1
                  direction: both
                  dst-port: CPU
                  src-port: Eth1/4
              - name: dell-2
                config:
                  name: dell-2
                  direction: both
                  dst-ip: 100.11.11.11
                  src-ip: 200.22.22.22
                  src-port: Eth1/6
                  queue: 0
  expected_config_requests:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-1"
      method: "delete"
      data:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST=dell-2"
      method: "delete"
      data:
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-3
            dst_port: CPU
            src_port: Eth1/4
            direction: TX
            type: span
    - path: "data/sonic-mirror-session:sonic-mirror-session/MIRROR_SESSION/MIRROR_SESSION_LIST"
      method: "patch"
      data:
        MIRROR_SESSION_LIST:
          - name: dell-2
            dst_ip: 32.22.22.12
            src_ip: 31.21.21.12
            src_port: Eth1/6
            direction: RX
            gre_type: "0x6689"
            queue: 0
            type: erspan
          - name: dell-6
            dst_ip: 22.22.22.12
            src_ip: 21.21.21.12
            src_port: Eth1/6
            direction: RX
            type: erspan
