---
merged_01_merge_all:
  module_args:
    config:
      cards:
        - card_id: 0
          usage_threshold: 39
      interfaces:
        - name: Ethernet0
          enabled: true
      global:
        auto_reset: true
        power_mgmt_model: 'class'
        usage_threshold: 300
    state: merged
  existing_config:
    - path: 'data/openconfig-poe:poe'
      response:
        code: 200
        value:
          openconfig-poe:poe:
            global:
              config: {}
            cards:
              card: []
    - path: 'data/openconfig-interfaces:interfaces'
      response:
        code: 200
        value:
          openconfig-interfaces:interfaces:
            interface:
              - name: Ethernet0
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe: {}
  expected_config_requests:
    - path: data/openconfig-poe:poe
      method: patch
      data:
        openconfig-poe:poe:
          global:
            config:
              power-management-model: class
              power-usage-threshold: 300
              auto-reset-mode: true
          cards:
            card:
              - card-id: 0
                config:
                  card-id: 0
                  power-usage-threshold: 39
    - path: data/openconfig-interfaces:interfaces
      method: patch
      data:
        openconfig-interfaces:interfaces:
          interface:
            - name: Ethernet0
              openconfig-if-ethernet:ethernet:
                openconfig-if-poe:poe:
                  config:
                    enabled: true

deleted_01_clear_lists:
  module_args:
    config:
      cards: []
      interfaces: []
    state: deleted
  existing_config:
    - path: 'data/openconfig-poe:poe'
      response:
        code: 200
        value:
          openconfig-poe:poe:
            global:
              config: {}
            cards:
              card:
                - card-id: 0
                  config:
                    card-id: 0
                    power-usage-threshold: 39
                - card-id: 1
                  config:
                    card-id: 1
                    power-usage-threshold: 39
    - path: 'data/openconfig-interfaces:interfaces'
      response:
        code: 200
        value:
          openconfig-interfaces:interfaces:
            interface:
              - name: Ethernet0
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: medium
              - name: Ethernet1
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: low
  expected_config_requests:
    - path: openconfig-poe:poe/cards/card=0
      method: delete
    - path: openconfig-poe:poe/cards/card=1
      method: delete
    - path: openconfig-interfaces:interfaces/interface=Ethernet0/openconfig-if-ethernet:ethernet/openconfig-if-poe:poe
      method: delete
    - path: openconfig-interfaces:interfaces/interface=Ethernet1/openconfig-if-ethernet:ethernet/openconfig-if-poe:poe
      method: delete

deleted_02_delete_some_items:
  module_args:
    config:
      cards:
        - card_id: 0
      interfaces:
        - name: Ethernet0
      global:
        auto_reset: true
        power_mgmt_model: 'class'
        usage_threshold: 300
    state: deleted
  existing_config:
    - path: 'data/openconfig-poe:poe'
      response:
        code: 200
        value:
          openconfig-poe:poe:
            global:
              config:
                power-management-model: 'class'
                power-usage-threshold: 300
                auto-reset-mode: true
            cards:
              card:
                - card-id: 0
                  config:
                    card-id: 0
                    power-usage-threshold: 39
                - card-id: 1
                  config:
                    card-id: 1
                    power-usage-threshold: 39
    - path: 'data/openconfig-interfaces:interfaces'
      response:
        code: 200
        value:
          openconfig-interfaces:interfaces:
            interface:
              - name: Ethernet0
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: medium
              - name: Ethernet1
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: low
  expected_config_requests:
    - path: openconfig-poe:poe/cards/card=0
      method: delete
    - path: openconfig-interfaces:interfaces/interface=Ethernet0/openconfig-if-ethernet:ethernet/openconfig-if-poe:poe
      method: delete
    - path: data/openconfig-poe:poe/global/config/auto-reset-mode
      method: delete
    - path: data/openconfig-poe:poe/global/config/power-management-model
      method: delete
    - path: data/openconfig-poe:poe/global/config/power-usage-threshold
      method: delete

deleted_03_mismatches:
  module_args:
    config:
      cards:
        - card_id: 3
      interfaces:
        - name: Ethernet4
      global:
        auto_reset: false
        power_mgmt_model: 'dynamic'
        usage_threshold: 203
    state: deleted
  existing_config:
    - path: 'data/openconfig-poe:poe'
      response:
        code: 200
        value:
          openconfig-poe:poe:
            global:
              config:
                power-management-model: class
                power-usage-threshold: 300
                auto_reset_mode: true
            cards:
              card:
                - card-id: 0
                  config:
                    card-id: 0
                    power-usage-threshold: 39
                - card-id: 1
                  config:
                    card-id: 1
                    power-usage-threshold: 39
    - path: 'data/openconfig-interfaces:interfaces'
      response:
        code: 200
        value:
          openconfig-interfaces:interfaces:
            interface:
              - name: Ethernet0
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: medium
              - name: Ethernet1
                openconfig-if-ethernet:ethernet:
                  openconfig-if-poe:poe:
                    config:
                      enabled: true
                      openconfig-if-poe-ext:priority: low